@use '../01-settings/breakpoints' as _b;
@use '../01-settings/utilities' as _u;
@use '../02-tools/mixins/responsive' as _r;
@use '../02-tools/mixins/generate-utility' as _gu;
@use 'sass:map';

// Loop over each breakpoint
@if _u.$use-utilities {

  @each $key, $utility in _u.$utilities {
    @if type-of($utility) == 'map' and (map-get($utility, focus)) {
      @include _gu.generate-utility($utility, '');
    }
  }

  @each $key, $utility in _u.$utilities {
    @if type-of($utility) == 'map' and (map-get($utility, hover)) {
      @include _gu.generate-utility($utility, '');
    }
  }

  @each $breakpoint in map-keys(_b.$breakpoints) {
    // Generate media query if needed
    @include _r.min($breakpoint) {
      $infix: _b.breakpoint-infix($breakpoint, _b.$breakpoints);

      @each $key, $utility in _u.$utilities {
        @if type-of($utility) == 'map' and (map-get($utility, responsive) or $infix == '') {
          @include _gu.generate-utility($utility, $infix);
        }
      }
    }
  }
}
